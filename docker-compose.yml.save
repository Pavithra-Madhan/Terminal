services:
  # 1. SHELL MCP Server (BASH Commands)
  shell_mcp:
    build:
      context: ./mcp_servers/shell
      dockerfile: Dockerfile 
    container_name: mcp_shell_server
    ports:
      - "8001:8000" 
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - mcp_network
    command: ["uvicorn", "server:app", "--host", "0.0.0.0", "--port", "8000"] 

  # 2. SQLITE MCP Server (Read-Only SELECT Queries)
  sqlite_mcp:
  build:
    context: ./mcp_servers/fs
    dockerfile: Dockerfile
  container_name: mcp_sqlite_server
  ports:
    - "8002:8000"
  # ADD SELINUX :Z FLAG FOR FEDORA
  volumes:
    - ./system.db:/app/system.db:Z,ro
    - ./memory.db:/app/memory.db:Z,ro
  networks:
    - mcp_network
  # 3. PYTHON MCP Server (Python Code Evaluation)
  python_mcp:
    build:
      context: ./mcp_servers/python
      dockerfile: Dockerfile
    container_name: mcp_python_server
    ports:
      - "8003:8000"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    # REMOVED: volumes for server.py. Relying on Dockerfile COPY
    networks:
      - mcp_network
    command: ["uvicorn", "server:app", "--host", "0.0.0.0", "--port", "8000"]
      
  # 4. FETCH MCP Server (Web Scraping/HTTP Calls)
  fetch_mcp:
    build:
      context: ./mcp_servers/fetch
      dockerfile: Dockerfile
    container_name: mcp_fetch_server
    ports:
      - "8004:8000"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    # REMOVED: volumes for server.py. Relying on Dockerfile COPY
    networks:
      - mcp_network
    command: ["uvicorn", "server:app", "--host", "0.0.0.0", "--port", "8000"]

# Define a shared network
networks:
  mcp_network:
    driver: bridge



